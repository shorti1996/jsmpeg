<!DOCTYPE html>
<html>
<head>
    <title>JSMpeg Stream Client</title>
    <style type="text/css">
        html, body {
            background-color: #111;
            text-align: center;
        }
    </style>

</head>
<body>
<canvas id="video-canvas"></canvas>
<script type="text/javascript" src="jsmpeg.min.js"></script>
<!--	<script type="text/javascript" src="src/jsmpeg.js"></script>-->
<script type="text/javascript">
    var url = 'ws://'+document.location.hostname+':8082/';
    // var url = 'ws://127.0.0.1:8082/';
    let protocols = ["protocol1"];
    var ws = new WebSocket(url, protocols);
    var msg = {
        type: 'authenticate',
        payload: {token: 'XXX'}
    };
    ws.onopen = function (event) {
        console.log("onopen");
        ws.send(JSON.stringify(msg));
    };
    ws.onmessage = function (ev) {
		console.log(`ev = ${ev}`);
	};

    var canvas = document.getElementById('video-canvas');
    // var source = JSMpeg.Source(ws);
    // var player = new JSMpeg.Player(url, {canvas: canvas});
</script>
</body>
</html>
